{"version":3,"sources":["../../../src/components/flickity/flickity.directive.ts"],"names":[],"mappings":"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","file":"flickity.directive.js","sourceRoot":"","sourcesContent":["declare let require: any;\r\n\r\nimport {\r\n  ElementRef, Directive, OnDestroy, Input, Output, EventEmitter, AfterContentInit\r\n} from '@angular/core';\r\n\r\nimport { FlickityOptions } from \"../../interfaces/flickity-options.interface\";\r\nimport { AppConfigService } from '../../services/app-config.service';\r\n\r\n\r\nexport class FlickityDirective implements AfterContentInit, OnDestroy {\r\n\r\n   config: FlickityOptions = {};\r\n   slideSelect = new EventEmitter<number>();\r\n   cellStaticClick = new EventEmitter<number>();\r\n   childrenUpdated = new EventEmitter<void>();\r\n\r\n  private flkty: any;\r\n  private appendElements: HTMLElement[] = [];\r\n  private childrenUpdate;\r\n  private childrenUpdateInterval = 300;\r\n\r\n  constructor(private el: ElementRef,\r\n              private appConfigService: AppConfigService) {}\r\n\r\n  ngAfterContentInit(): void {\r\n    this.init();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  init() {\r\n    if (this.appConfigService.isPlatformServer()) {\r\n      return;\r\n    }\r\n\r\n    const Flickity = require('flickity-module');\r\n\r\n    let config = this.config;\r\n\r\n    if (this.flkty) {\r\n      config['initialIndex'] = this.flkty.selectedIndex;\r\n      this.destroy();\r\n    }\r\n\r\n    this.flkty = new Flickity(this.el.nativeElement, config);\r\n\r\n    this.flkty.on('select', () => {\r\n      this.slideSelect.emit(this.selectedIndex);\r\n    });\r\n\r\n    this.flkty.on('staticClick', (_event: any, _pointer: any, _cellElement: any, cellIndex: any) => {\r\n      this.cellStaticClick.emit(cellIndex);\r\n    });\r\n\r\n    this.updateElements();\r\n  }\r\n\r\n  destroy() {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    if (this.childrenUpdate) {\r\n      clearInterval(this.childrenUpdate);\r\n      this.childrenUpdate = undefined;\r\n    }\r\n\r\n    this.flkty.destroy();\r\n  }\r\n\r\n  resize() {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    this.flkty.resize();\r\n  }\r\n\r\n  reposition() {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    this.flkty.reposition();\r\n  }\r\n\r\n  previous() {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    this.flkty.previous();\r\n  }\r\n\r\n  previousAvailable(): boolean {\r\n    if (this.selectedIndex === undefined) {\r\n      return false;\r\n    }\r\n\r\n    return this.selectedIndex > 0;\r\n  }\r\n\r\n  next() {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    this.flkty.next();\r\n  }\r\n\r\n  nextAvailable(): boolean {\r\n    if (this.selectedIndex === undefined || !this.slides) {\r\n      return false;\r\n    }\r\n\r\n    return this.selectedIndex < this.slides - 1;\r\n  }\r\n\r\n  get selectedIndex(): number {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    return this.flkty.selectedIndex;\r\n  }\r\n\r\n  get cells(): number {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    return this.flkty.cells.length;\r\n  }\r\n\r\n  get slides(): number {\r\n    if (!this.flkty) {\r\n      return;\r\n    }\r\n\r\n    return this.flkty['slides'].length;\r\n  }\r\n\r\n  append(el: HTMLElement) {\r\n    this.appendElements.push(el);\r\n  }\r\n\r\n  prepend(el: HTMLElement) {\r\n    this.flkty.prepend(el);\r\n  }\r\n\r\n  private updateElements() {\r\n    if (!this.flkty || this.appendElements.length == 0) {\r\n      return;\r\n    }\r\n\r\n    this.appendElements.forEach(el => this.flkty.append(el));\r\n    this.appendElements = [];\r\n\r\n    this.resize();\r\n    this.childrenUpdated.emit();\r\n    this.childrenUpdate = setTimeout(() => this.updateElements(), this.childrenUpdateInterval);\r\n  }\r\n\r\n  select(index: number, isWrapped = true, isInstant = false) {\r\n    this.flkty.select(index, isWrapped, isInstant);\r\n  }\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: Directive, args: [{ selector: '[flickity]' }, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: AppConfigService, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'config': [{ type: Input, args: ['flickity', ] },],\n'slideSelect': [{ type: Output },],\n'cellStaticClick': [{ type: Output },],\n'childrenUpdated': [{ type: Output },],\n};\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}